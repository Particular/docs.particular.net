## Serialization

By default, NServiceBus uses a `BinaryFormatter` to serialize and deserialize data bus properties.

> [!WARNING]
> `BinaryFormatter` [is not supported in .NET 5](https://docs.microsoft.com/en-us/dotnet/core/compatibility/core-libraries/5.0/binaryformatter-serialization-obsolete). For projects that target .NET 5, use a custom serializer as described below.

### Using a custom serializer

To override the data bus property serializer, create a class that implements `IDataBusSerializer` and add it to the [dependency injection container](/nservicebus/dependency-injection/).

> [!NOTE]
> Implementations of `IDataBusSerializer` should not close `Stream` instances that NServiceBus provides. NServiceBus manages the lifecycle of these `Stream` instances and may attempt to manipulate them after the custom serializer has been called.

> [!WARNING]
> The data bus serializer installed in the receiving endpoint must be able to deserialize data that was generated by the serializer installed in the sending endpoint.
