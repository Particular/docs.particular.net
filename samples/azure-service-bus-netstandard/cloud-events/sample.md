---
title: Azure Service Bus CloudEvents Sample
summary: Demonstrates how to consume CloudEvents via the Azure Service Bus
reviewed: 2025-12-08
component: ASBS
related:
- transports/azure-service-bus
---

## Prerequisites

include: asb-connectionstring-xplat

The Azure Event Grid should be configured to receive the Azure Blob Storage notifications and deliver them to the Azure Service Bus using the CloudEvents schema. The configuration is described in the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/event-grid/cloud-event-schema#sample-event-using-cloudevents-schema).

## Code walk-through

This sample shows an endpoint receiving a CloudEvents message from the Azure Service Bus. Such a message can be created by the Azure Blob Storage and delivered to the Azure Service Bus via the Azure Event Grid.

* The `Endpoint` defines the schema for the CloudEvents message.
* The `Endpoint` enables CloudEvents support and configures the type mapping.
* The `Endpoint` configures the serializer to support fields and properties with different casing.
* The `Endpoint` receives the message and calls the proper handler.

### CloudEvents message schema

The message schema is defined as follows:

snippet: asb-cloudevents-message-definition

This schema must match the schema of the [notification generated by the Event Grid](https://learn.microsoft.com/en-us/azure/event-grid/event-schema-blob-storage?tabs=cloud-event-schema#microsoftstorageblobcreated-event).

### CloudEvents support configuration

CloudEvents support must be explicitly enabled:

snippet: asb-cloudevents-configuration

The configuration includes the type mapping to match the messages with the classes:

snippet: asb-cloudevents-typemapping

To support the differences between uppercase letters and lowercase letters in the schema definition and content, the serializer is configured to use case insensitive mapping:

snippet: asb-cloudevents-serialization

### Running the sample

1. Run the sample.
2. Generate the `BlobCreated` event by creating a new file in the Azure Blob Storage container.
3. Observe that the sample prints out the URL of the newly created file.


