---
title: ServiceControl integration
reviewed: 2024-06-24
component: ServiceControl
---

<!-- TODO: Editorial: Is this article needed? Isn't this described in the index and other places (assumption - verify)? Why is it called "integration"? Only the contracts thing at the end seems to fit that term, and it has a file. Mentioning the HTTP API, which isn't recommend user usage, seems wrong. Can this just be removed and the menu adjusted? -->

ServiceControl is the backend service for [ServicePulse](/servicepulse) and [ServiceInsight](/serviceinsight). It can also be used as the back-end for third-party integrations. It collects and stores information from monitored NServiceBus endpoints and exposes it via an HTTP API.

> [!NOTE]
> In systems that don't use ServiceControl, failed messages remain in the configured error queue and audit messages remain in the configured audit queue. If ServiceControl is introduced into an existing environment, ServiceControl consumes the messages so they are no longer in their respective queues.

ServiceControl provides monitoring capabilities by analyzing the configured error and audit queues. It can extract information like endpoint name, queue name and, in case of error messages, the exception stack trace, etc. This information is stored in an internal database.

## Configuring an endpoint to be monitored by ServiceControl

To allow ServiceControl to monitor endpoints:

1. A ServiceControl Error instance must be [deployed](/servicecontrol/servicecontrol-instances/deployment/).
2. A ServiceControl Audit instance must be [deployed](/servicecontrol/audit-instances/deployment/).
3. An instance of ServiceControl must be [configured to use the same transport](/servicecontrol/transports.md) as the endpoints being monitored.
4. Every endpoint must be [configured for auditing](/nservicebus/operations/auditing.md#configuring-auditing) with the same audit queue as the instance of ServiceControl.

   ```mermaid
   graph LR

   EndpointA --- AuditQ
   EndpointB --- AuditQ
   EndpointC --- AuditQ

   AuditQ[audit queue] --- ServiceControl

   ServiceControl .- AuditLog[audit.log queue]
   ```

5. Every endpoint must be configured for [recoverability](/nservicebus/recoverability/) with the same error queue as ServiceControl.

   ```mermaid
   graph LR

   EndpointA --- ErrorQ
   EndpointB --- ErrorQ
   EndpointC --- ErrorQ

   ErrorQ[error queue] --- ServiceControl

   ServiceControl .- ErrorLog[error.log]
   ```

## Configuring other monitoring and debugging capabilities

In addition to ingesting audit and error information, ServiceControl can process other types of information generated by monitoring and debugging components:

- [Heartbeats](/monitoring/heartbeats/)
- [Custom checks](/monitoring/custom-checks/)
- [Saga audit](/nservicebus/sagas/saga-audit.md)
- [Monitoring](/monitoring)

Endpoints must be configured appropriately to allow ServiceControl to gather this information:

- [Auditing](/nservicebus/operations/auditing.md) must be enabled to collect data related to individual messages.
- [Recoverability](/nservicebus/recoverability) must be enabled to store information about message processing failures.
- [Heartbeats](/monitoring/heartbeats/install-plugin.md), [custom checks](/monitoring/custom-checks/install-plugin.md), and [other plugins](/servicecontrol/plugins/) must be installed in endpoints.

> [!NOTE]
> All endpoints in a given environment must be configured to send messages to the same ServiceControl plugin, audit, and error queues for ServiceControl to work.

## Event notifications

ServiceControl detects important system events and publishes them as [integration events](/servicecontrol/contracts.md) to subscribed endpoints.
