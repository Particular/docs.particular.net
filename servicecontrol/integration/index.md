---
title: ServiceControl integration
reviewed: 2021-04-09
component: ServiceControl
---

ServiceControl is the backend service for [ServicePulse](/servicepulse), [ServiceInsight](/serviceinsight), and third-party integration. It collects and stores information from monitored NServiceBus endpoints and exposes this information for consumption by various clients via a HTTP API.

NOTE: When ServiceControl is introduced into an existing environment the standard behavior of error and audit queues changes. Before ServiceControl is introduced, failed messages remain in the configured error queue and audit messages remain in the configured audit queue. After ServiceControl is introduced, messages in both queues are consumed by ServiceControl.

ServiceControl provides the monitoring capability by analyzing the configured error and audit queues. It can extract information like endpoint name, queue name and, in case of error messages, the exception stack trace, etc. This information is stored in an internal database.

## Configuring an endpoint to be monitored by ServiceControl

To allow ServiceControl to monitor endpoints:

1. ServiceControl must be [installed](/servicecontrol/installation.md) and at least one instance must be configured to use the same transport as the endpoints.
2. Every endpoint must be [configured for auditing](/nservicebus/operations/auditing.md#configuring-auditing) with the same audit queue as ServiceControl.

   ```mermaid
   graph LR

   EndpointA --> AuditQ 
   EndpointB --> AuditQ
   EndpointC --> AuditQ
 
   AuditQ[audit] --> ServiceControl 

   ServiceControl .-> AuditLog[audit.log]
   ```

3. Every endpoint must be configured for [recoverability](/nservicebus/recoverability/) with the same error queue as ServiceControl.

   ```mermaid
   graph LR

   EndpointA --> ErrorQ 
   EndpointB --> ErrorQ
   EndpointC --> ErrorQ

   ErrorQ[error] --> ServiceControl 

   ServiceControl .-> ErrorLog[error.log]
   ```

## Configuring other monitoring and debugging capabilities

In addition to ingesting audit and error information, ServiceControl can process other types of information generated by monitoring and debugging components:

- [Heartbeats](/monitoring/heartbeats/)
- [Custom checks](/monitoring/custom-checks/)
- [Saga audit](/nservicebus/sagas/saga-audit.md)
- [Monitoring](/monitoring)

Endpoints must be configured appropriately to allow ServiceControl to gather this information:

- [Auditing](/nservicebus/operations/auditing.md) must be enabled to collect data related to individual messages.
- [Recoverability](/nservicebus/recoverability) must be enabled to store information about message processing failures.
- [Heartbeats](/monitoring/heartbeats/install-plugin.md), [custom checks](/monitoring/custom-checks/install-plugin.md), and [other plugins](/servicecontrol/plugins/) must be installed in endpoints.

NOTE: All endpoints in a given environment must be configured to forward to the same audit, error, and ServiceControl plugin queues.

## Event notifications

ServiceControl detects important system events and publishes them as [integration events](/servicecontrol/contracts.md) to subscribed endpoints.

## Transport Adapter

The [ServiceControl Transport Adapter](/servicecontrol/transport-adapter/) decouples ServiceControl from the specifics of endpoint transport configuration to support scenarios where endpoints use physical routing features [not compatible with ServiceControl](/servicecontrol/transport-adapter/incompatible-features.md) or where endpoints use mixed transports or multiple instances of a message broker.
